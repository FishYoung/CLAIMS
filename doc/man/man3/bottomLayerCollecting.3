.TH "bottomLayerCollecting" 3 "Thu Nov 12 2015" "Claims" \" -*- nroff -*-
.ad l
.nh
.SH NAME
bottomLayerCollecting \- 
.SH SYNOPSIS
.br
.PP
.PP
\fC#include <CSBIndexBuilding\&.h>\fP
.PP
Inherits \fBclaims::physical_operator::PhysicalOperator\fP\&.
.SS "Classes"

.in +1c
.ti -1c
.RI "struct \fBremaining_block\fP"
.br
.ti -1c
.RI "class \fBState\fP"
.br
.in -1c
.SS "Public Member Functions"

.in +1c
.ti -1c
.RI "\fBbottomLayerCollecting\fP ()"
.br
.ti -1c
.RI "\fBbottomLayerCollecting\fP (\fBState\fP state)"
.br
.ti -1c
.RI "virtual \fB~bottomLayerCollecting\fP ()"
.br
.ti -1c
.RI "bool \fBOpen\fP (const \fBPartitionOffset\fP &partition_offset=0)"
.br
.ti -1c
.RI "bool \fBNext\fP (\fBBlockStreamBase\fP *block)"
.br
.ti -1c
.RI "bool \fBClose\fP ()"
.br
.ti -1c
.RI "void \fBPrint\fP ()"
.br
.in -1c
.SS "Private Member Functions"

.in +1c
.ti -1c
.RI "void \fBatomicPushRemainingBlock\fP (\fBremaining_block\fP rb)"
.br
.ti -1c
.RI "bool \fBatomicPopRemainingBlock\fP (\fBremaining_block\fP &rb)"
.br
.ti -1c
.RI "void \fBAtomicPushBlockStream\fP (\fBBlockStreamBase\fP *block)"
.br
.ti -1c
.RI "\fBBlockStreamBase\fP * \fBAtomicPopBlockStream\fP ()"
.br
.ti -1c
.RI "bool \fBaskForNextBlock\fP (\fBBlockStreamBase\fP *&block, \fBremaining_block\fP &rb)"
.br
.ti -1c
.RI "void \fBcomputeOutputSchema\fP ()"
.br
.ti -1c
.RI "template<class Archive > void \fBserialize\fP (Archive &ar, const unsigned int version)"
.br
.in -1c
.SS "Private Attributes"

.in +1c
.ti -1c
.RI "\fBState\fP \fBstate_\fP"
.br
.ti -1c
.RI "\fBPartitionStorage::PartitionReaderItetaor\fP * \fBpartition_reader_iterator_\fP"
.br
.ti -1c
.RI "\fBChunkReaderIterator\fP * \fBchunk_reader_iterator_\fP"
.br
.ti -1c
.RI "std::list< \fBremaining_block\fP > \fBremaining_block_list_\fP"
.br
.ti -1c
.RI "std::list< \fBBlockStreamBase\fP * > \fBblock_stream_list_\fP"
.br
.ti -1c
.RI "\fBSchema\fP * \fBoutput_schema_\fP"
.br
.ti -1c
.RI "\fBChunkOffset\fP \fBchunk_offset_\fP"
.br
.ti -1c
.RI "unsigned short \fBblock_offset_\fP"
.br
.ti -1c
.RI "\fBLock\fP \fBlock_\fP"
.br
.in -1c
.SS "Friends"

.in +1c
.ti -1c
.RI "class \fBboost::serialization::access\fP"
.br
.in -1c
.SS "Additional Inherited Members"
.SH "Constructor & Destructor Documentation"
.PP 
.SS "bottomLayerCollecting::bottomLayerCollecting ()"

.PP
References claims::physical_operator::PhysicalOperator::InitExpandedStatus()\&.
.SS "bottomLayerCollecting::bottomLayerCollecting (\fBState\fPstate)"

.PP
References claims::physical_operator::PhysicalOperator::InitExpandedStatus()\&.
.SS "bottomLayerCollecting::~bottomLayerCollecting ()\fC [virtual]\fP"

.SH "Member Function Documentation"
.PP 
.SS "bool bottomLayerCollecting::askForNextBlock (\fBBlockStreamBase\fP *&block, \fBremaining_block\fP &rb)\fC [private]\fP"

.PP
References Lock::acquire(), bottomLayerCollecting::remaining_block::block_offset, block_offset_, bottomLayerCollecting::remaining_block::chunk_offset, chunk_offset_, chunk_reader_iterator_, lock_, ChunkReaderIterator::nextBlock(), PartitionStorage::PartitionReaderItetaor::nextChunk(), partition_reader_iterator_, Lock::release(), and bottomLayerCollecting::remaining_block::tuple_offset\&.
.PP
Referenced by Next()\&.
.SS "\fBBlockStreamBase\fP * bottomLayerCollecting::AtomicPopBlockStream ()\fC [private]\fP"

.PP
References Lock::acquire(), block_stream_list_, lock_, and Lock::release()\&.
.PP
Referenced by Next()\&.
.SS "bool bottomLayerCollecting::atomicPopRemainingBlock (\fBremaining_block\fP &rb)\fC [private]\fP"

.PP
References Lock::acquire(), lock_, Lock::release(), and remaining_block_list_\&.
.PP
Referenced by Next()\&.
.SS "void bottomLayerCollecting::AtomicPushBlockStream (\fBBlockStreamBase\fP *block)\fC [private]\fP"

.PP
References Lock::acquire(), block_stream_list_, lock_, and Lock::release()\&.
.PP
Referenced by Next(), and Open()\&.
.SS "void bottomLayerCollecting::atomicPushRemainingBlock (\fBremaining_block\fPrb)\fC [private]\fP"

.PP
References Lock::acquire(), lock_, Lock::release(), and remaining_block_list_\&.
.PP
Referenced by Next()\&.
.SS "bool bottomLayerCollecting::Close ()\fC [virtual]\fP"

.PP
Reimplemented from \fBclaims::physical_operator::PhysicalOperator\fP\&.
.PP
References block_stream_list_, claims::physical_operator::PhysicalOperator::InitExpandedStatus(), partition_reader_iterator_, and remaining_block_list_\&.
.SS "void bottomLayerCollecting::computeOutputSchema ()\fC [private]\fP"

.PP
References Schema::getcolumn(), bottomLayerCollecting::State::key_indexing_, output_schema_, bottomLayerCollecting::State::schema_, state_, t_int, and t_u_smallInt\&.
.PP
Referenced by Open()\&.
.SS "bool bottomLayerCollecting::Next (\fBBlockStreamBase\fP *block)\fC [virtual]\fP"

.PP
Reimplemented from \fBclaims::physical_operator::PhysicalOperator\fP\&.
.PP
References BlockStreamBase::allocateTuple(), askForNextBlock(), Operate::assignment(), AtomicPopBlockStream(), atomicPopRemainingBlock(), AtomicPushBlockStream(), atomicPushRemainingBlock(), bottomLayerCollecting::remaining_block::block, bottomLayerCollecting::remaining_block::block_offset, bottomLayerCollecting::remaining_block::chunk_offset, BlockStreamBase::createIterator(), BlockStreamBase::BlockStreamTraverseIterator::currentTuple(), BlockStreamBase::Empty(), Schema::getcolumn(), Schema::getColumnAddess(), Schema::getTupleMaxSize(), BlockStreamBase::BlockStreamTraverseIterator::increase_cur_(), bottomLayerCollecting::remaining_block::iterator, bottomLayerCollecting::State::key_indexing_, column_type::operate, output_schema_, bottomLayerCollecting::State::schema_, BlockStreamBase::setEmpty(), state_, and bottomLayerCollecting::remaining_block::tuple_offset\&.
.SS "bool bottomLayerCollecting::Open (const \fBPartitionOffset\fP &part_off = \fC0\fP)\fC [virtual]\fP"
Because that \fBboost::serialization\fP will allocate an instance of this class when deserializing, and hence the following three virtual method cannot be pure\&. 
.PP
Reimplemented from \fBclaims::physical_operator::PhysicalOperator\fP\&.
.PP
References AtomicPushBlockStream(), claims::physical_operator::PhysicalOperator::BarrierArrive(), bottomLayerCollecting::State::block_size_, computeOutputSchema(), PartitionStorage::createAtomicReaderIterator(), BlockStreamBase::createBlockWithDesirableSerilaizedSize(), BlockManager::getInstance(), PartitionID::getName(), claims::physical_operator::PhysicalOperator::GetReturnStatus(), partition_reader_iterator_, bottomLayerCollecting::State::projection_id_, bottomLayerCollecting::State::schema_, claims::physical_operator::PhysicalOperator::SetReturnStatus(), state_, and claims::physical_operator::PhysicalOperator::TryEntryIntoSerializedSection()\&.
.SS "void bottomLayerCollecting::Print ()\fC [inline]\fP, \fC [virtual]\fP"

.PP
Reimplemented from \fBclaims::physical_operator::PhysicalOperator\fP\&.
.SS "template<class Archive > void bottomLayerCollecting::serialize (Archive &ar, const unsigned intversion)\fC [inline]\fP, \fC [private]\fP"

.PP
References state_\&.
.SH "Friends And Related Function Documentation"
.PP 
.SS "friend class boost::serialization::access\fC [friend]\fP"

.SH "Member Data Documentation"
.PP 
.SS "unsigned short bottomLayerCollecting::block_offset_\fC [private]\fP"

.PP
Referenced by askForNextBlock()\&.
.SS "std::list<\fBBlockStreamBase\fP*> bottomLayerCollecting::block_stream_list_\fC [private]\fP"

.PP
Referenced by AtomicPopBlockStream(), AtomicPushBlockStream(), and Close()\&.
.SS "\fBChunkOffset\fP bottomLayerCollecting::chunk_offset_\fC [private]\fP"

.PP
Referenced by askForNextBlock()\&.
.SS "\fBChunkReaderIterator\fP* bottomLayerCollecting::chunk_reader_iterator_\fC [private]\fP"

.PP
Referenced by askForNextBlock()\&.
.SS "\fBLock\fP bottomLayerCollecting::lock_\fC [private]\fP"

.PP
Referenced by askForNextBlock(), AtomicPopBlockStream(), atomicPopRemainingBlock(), AtomicPushBlockStream(), and atomicPushRemainingBlock()\&.
.SS "\fBSchema\fP* bottomLayerCollecting::output_schema_\fC [private]\fP"

.PP
Referenced by computeOutputSchema(), and Next()\&.
.SS "\fBPartitionStorage::PartitionReaderItetaor\fP* bottomLayerCollecting::partition_reader_iterator_\fC [private]\fP"

.PP
Referenced by askForNextBlock(), Close(), and Open()\&.
.SS "std::list<\fBremaining_block\fP> bottomLayerCollecting::remaining_block_list_\fC [private]\fP"

.PP
Referenced by atomicPopRemainingBlock(), atomicPushRemainingBlock(), and Close()\&.
.SS "\fBState\fP bottomLayerCollecting::state_\fC [private]\fP"

.PP
Referenced by computeOutputSchema(), Next(), Open(), and serialize()\&.

.SH "Author"
.PP 
Generated automatically by Doxygen for Claims from the source code\&.
